<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zerock.mapper.ReplyMapper">
   <select id="read" resultType="com.zerock.domain.ReplyVO">
      <![CDATA[
         select * from tbl_reply where rno = #{rno}
      ]]>
   </select>
    <select id="getListWithPaging" resultType="com.zerock.domain.ReplyVO">
      <![CDATA[
         SELECT rno, bno, reply, replyer, replyDate, updateDate
         FROM 
         	(
         		SELECT rownum rn, rno, bno, reply, replyer, replyDate, updateDate
         		FROM tbl_reply
         		WHERE 
         			bno = #{bno}
         			and rownum <= #{cri.pageNum} * #{cri.amount}
         	)
         WHERE rn > (#{cri.pageNum} - 1) * #{cri.amount}
      ]]>
   </select>
   
   <select id="getCountByBno" resultType="int">
   <![CDATA[
   		SELECT count(rno) FROM tbl_reply WHERE bno=#{bno}
     ]]>
   </select>
   
   <insert id="insert">
      <![CDATA[
         insert into tbl_reply(rno, bno, reply, replyer)
         values (seq_reply.nextval, #{bno}, #{reply}, #{replyer})
      ]]>
   </insert>
   
   <update id="update">
      <![CDATA[
         update tbl_reply
         set reply = #{reply},
            updateDate = sysdate
         where rno = #{rno}
      ]]>
   </update>
   
   <delete id="delete">
      <![CDATA[
         delete from tbl_reply
         where rno = #{rno}
      ]]>
   </delete>
</mapper>